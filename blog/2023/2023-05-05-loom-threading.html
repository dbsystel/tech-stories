<!doctype html>
<html lang="de">
<head>
<style>
a[href^="//"]:after,
a[href^="http://"]:after,
a[href^="https://"]:after {
    content: "" !important;
    margin: 0 0 0 0;
}

</style>

    
    
    <script>var toRoot = '../../';</script>
    <!-- blog/2023/2023-05-05-loom-threading.html -->
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="jbake" name="generator">
    <meta content="INDEX, FOLLOW" name="ROBOTS">

    <title>Projekt Loom ist da</title>
    <meta content="Threading wie es sein soll: Projekt Loom ist da" property="og:title">
    <meta content="     Es ist endlich so weit - das lang ersehnte Projekt Loom hat seinen Weg in das JDK gefunden!  " property="og:description">
    <meta content="website" property="og:type">
    <meta content="Tech Stories" property="og:site_name">
    <meta content="https://dbsystel.github.io/tech-stories/images/home.png" property="og:image">
    <meta content="Threading wie es sein soll: Projekt Loom ist da" itemprop="name">
    <meta content="     Es ist endlich so weit - das lang ersehnte Projekt Loom hat seinen Weg in das JDK gefunden!  " itemprop="description">
    <meta content="summary" name="twitter:card">
    <meta content="Threading wie es sein soll: Projekt Loom ist da" name="twitter:title">
    <meta content="     Es ist endlich so weit - das lang ersehnte Projekt Loom hat seinen Weg in das JDK gefunden!  " name="twitter:description">

    <link as="style" href="../../css/main.min.docsy.css" rel="preload">
    <link href="../../css/main.min.docsy.css" integrity="" rel="stylesheet">
    <link href="../../css/asciidoctor.css" rel="stylesheet">
    <link href="../../css/prettify.css" rel="stylesheet">
    <link href="../../css/bahn-ng-theme.css" rel="stylesheet">
    <link href="../../css/tabbed-blocks.css" rel="stylesheet">
    <link href="../../css/tech-stories.css" rel="stylesheet">

    <!-- favicon generated with https://www.favicon-generator.org/ -->
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="../../apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../../apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../../apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../../apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../../apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../../apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../../apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../../apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../../apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="../../android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../../favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
    <link rel="manifest" href="../../manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../../ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

  <script src="../../js/jquery-3.5.1.min.js"></script>
  <script src="../../js/openseadragon-4.1.0/openseadragon.js"></script>


    <link rel="stylesheet" href="../../css/micrositemaster.db-ui-core.css" rel="stylesheet">
<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(["setExcludedQueryParams", ["hl","start","itemsPerPage"]]);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://dbwas.service.deutschebahn.com/piwik/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '1002']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="https://dbwas.service.deutschebahn.com/piwik/matomo.php?idsite=1002&amp;rec=1" style="border:0;" alt="" /></p></noscript>
<!-- End Matomo Code -->

</head>

<body onload="prettyPrint()" class="td-section bahn ng">
<header>
  
<nav aria-label="main navigation" class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="../../index.html">
      <span class="navbar-logo"></span><span
          class="font-weight-bold">Tech Stories</span>
  </a>
  <div class="td-navbar-nav-scroll ml-auto mx-lg-auto" id="main_navbar">
    <ul class="navbar-nav">
      
    </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block" >
    
  </div>
</nav>

</header>
<div class="container-fluid">
  <div class="td-main">
    <div class="row flex-xl-nowrap">
      <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
        <div class="td-sidebar__inner" id="td-sidebar-menu">
          
        <form class="td-sidebar__search d-flex align-items-center d-lg-none" action="../../search.html">

            <input aria-label="Suchen" name="q" autocomplete="off" class="form-control td-search-input"
                   placeholder="Suchen" type="search">


            <button aria-controls="td-docs-nav" aria-expanded="false"
                    aria-label="Toggle section navigation" class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" data-target="#td-section-nav"
                    data-toggle="collapse" type="button">
            </button>
        </form>

        <nav aria-label="Submenu" class="collapse td-sidebar-nav" id="td-section-nav" >

            <ul class="td-sidebar-nav__section">
                <li class="td-sidebar-nav__section-title">
                    <span class="align-left pl-0 pr-2 pt-2 active td-sidebar-link td-sidebar-link__section">-</span>
                </li>
                <li>
                  <ul>
                      <li class="collapse show" id="docs">
                          
                        <ul class="td-sidebar-nav__section ul-0">
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/index.html">Ãœbersicht</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child"><span class="label">2024</span>
                        <ul class="ul-1">
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2024/2024-04-25-JAX-Inner-Source.html">Inner Source@DB</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2024/2024-04-04-DB-Systel-KubeCon.html">DB Systel auf der KubeCon 2024 in Paris</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2024/2024-04-02-Journey-from-TypeScript-to-Java-part-1.html">My journey from TypeScript to Java - Part 1</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2024/2024-02-07-Ein-Jahr-PostgreSQL-statt-Oracle-Das-Leben-danach.html">Ein Jahr PostgreSQL statt Oracle</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2024/2024-02-06-ChatGPT.html">Architektur mit ChatGPT</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2024/2024-01-25-Evolution-der-Webentwicklung.html">Meine Reise durch die Evolution der Webentwicklung</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2024/2024-01-16-Accessibility-in-Angular.html">Accessibility in Angular</a>
                            </li>
                        </ul>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child"><span class="label">2023</span>
                        <ul class="ul-1">
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2023/2023-12-21-vollautomatisch-konstruierter-Fahrplan.html">Fahrplankonstruktion</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2023/2023-11-29-AI-in-Software-Design.html">AI in Software Design</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2023/2023-11-20-einfuehrung-barrierefreiheit-web.html">A11y: EAA, BFSG, WCAG, WAI, ARIA, WTF? â€“ it's for the people stupid!</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2023/2023-11-20-conways-law.html">Conwayâ€™s Law</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2023/2023-11-08-prompt-engineering.html">Prompt-Engineering</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2023/2023-08-21-vue2-vue3-migration.html">Migrate Vue 2 to Vue 3</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2023/2023-05-15-developer-experience-platform-fuer-entwicklerinnen.html">Developer Experience Platform</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section active"
                                   href="../../blog/2023/2023-05-05-loom-threading.html">Projekt Loom ist da</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2023/2023-04-01-Indoor-GIS-zur-Rationalisierung-von-Wartungsarbeiten.html">Indoor-GIS</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2023/2023-04-09-vortrag-auf-der-javaland.html">JavaLand 2023</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2023/2023-03-28-ChatGPT-Einblicke-und-mehr-Generative-Sprachmodelle-Herausforderungen-und-Chancen.html">ChatGPT</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2023/2023-03-08-Re-Platforming-Mainframe-Mehr-als-nur-Lift-Shift.html">Re-Platforming Mainframe</a>
                            </li>
                        </ul>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child"><span class="label">2022</span>
                        <ul class="ul-1">
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2022/2022-15-03-good-practices-api.html">Good Practices im API-Umfeld</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2022/2022-11-24-the-journey-towards-K8s-at-Deutsche-Bahn.html">K8s at Deutsche Bahn</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2022/2022-11-04-Produkt-statt-Projekmanagement.html">Produkt- statt Projektmanagement</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2022/2022-10-21-Deine-Diagramme-sind-Legende.html">Deine Diagramme sind Legende?</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2022/2022-03-23-Vielfalt-bei-der-Bahn-Computerlinguistinnen-treiben-Digitalisierung-voran.html">Vielfalt bei der Bahn</a>
                            </li>
                        </ul>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child"><span class="label">2021</span>
                        <ul class="ul-1">
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2021/2021-11-02-KITT-das-Kuenstliche-Intelligenz-Translation-Tool.html">KITT Tool</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2021/2021-06-08-Bad-bots-Chancen-und-Herausforderungen-fuer-KI-und-Sprache.html">Bad Bots</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2021/2021-04-12-Computer-Vision-Use-Cases-at-Deutsche-Bahn.html">Computer Vision Use Cases</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2021/2021-03-20-Die-C4-Testpyramide-eine-architekturgetriebene-Teststrategie.html">Die C4-Testpyramide</a>
                            </li>
                        </ul>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child"><span class="label">2020</span>
                        <ul class="ul-1">
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2020/2020-12-07-devops-mehr-geschwindigkeit-auf-der-schiene.html">DevOps Geschwindigkeit</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2020/2020-05-19-5vue-js-vs-angular-was-ist-besser.html">Vue.js vs. Angular</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2020/2020-03-27-DB-Systel-streitet-auf-der-OOP-fuer-guten-Code.html">OOP: Guter Code</a>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2020/2020-03-14-API-first-mit-TypeScript.html">API first mit TS</a>
                            </li>
                        </ul>
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child"><span class="label">2019</span>
                        <ul class="ul-1">
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../../blog/2019/2019-09-13-Spock-und-AsciiDoc.html">Spock und AsciiDoc</a>
                            </li>
                        </ul>
                            </li>
                        </ul>
                      </li>
                  </ul>
                </li>
	   </ul>
        </nav>

        </div>
      </div>
      <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
        <div class="td-page-meta ml-2 pb-1 pt-2 mb-0" role="navigation" aria-label="page content navigation">
          

        <a href="https://github.com/dbsystel/tech-stories/edit/main/src/docs/blog/2023/2023-05-05-loom-threading.adoc"
           target="_blank"><i class="fa fa-edit fa-fw"></i> Improve this doc</a>



            <a href="https://github.com/dbsystel/tech-stories/issues/new?title=Docs%3A+Feedback+for+%27Projekt+Loom+ist+da%27&body=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23page: https://github.com/dbsystel/tech-stories/edit/main/src/docs/blog/2023/2023-05-05-loom-threading.adoc%0A%23branch: main" target="_blank"><i
                class="fab fa-github fa-fw"></i> Create an issue</a>
        
        
        <hr />

<!--script>
    var discussionId = 1076;
    alert(discussionId);
</script>


<script>

    function showNumberOfComments() {
        console.log("DiscussionId: 1076");

        const query = `
            query {
                repository(owner: "docToolchain", name: "docToolchain") {
                    discussion(number: 1076) {
                        comments {
                            totalCount
                        }
                    }
                }
            }
        `;

        fetch('https://api.github.com/graphql', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer GITHUB_TOKEN',
        },
        body: JSON.stringify({ query }),
        })
        .then((response) => response.json())
        .then((data) => document.getElementById("noOfComments").innerHTML = data.data.repository.discussion.comments.totalCount);

    }

    document.addEventListener('DOMContentLoaded', function(event) {
        showNumberOfComments();
    });

</script-->
<div id="noOfComments" style="border: solid 0px red; font-size: 16pt;"></div>



    <div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_threading_wie_es_sein_soll_projekt_loom_ist_da">Threading wie es sein soll: Projekt Loom ist da</a>
<ul class="sectlevel2">
<li><a href="#_virtualisierung_hilft_schon_immer">Virtualisierung hilft schon immer</a></li>
<li><a href="#_und_der_weg_ins_schlamassel">â€¦ und der Weg ins Schlamassel</a></li>
<li><a href="#_threads_sind_die_grundlage_der_nebenlÃ¤ufigkeit">Threads sind die Grundlage der NebenlÃ¤ufigkeit</a></li>
<li><a href="#_asynchrone_programmierung_als_notlÃ¶sung">Asynchrone Programmierung als NotlÃ¶sung</a></li>
<li><a href="#_projekt_loom_als_rettung">Projekt Loom als Rettung</a></li>
<li><a href="#_virtualthreads_benutzen_ist_fast_einfacher_als_vermeiden">VirtualThreads: benutzen ist (fast) einfacher als vermeiden</a></li>
<li><a href="#_anpassungen_im_eigenen_code">Anpassungen im eigenen Code</a></li>
<li><a href="#_angewohnheiten_hinterfragen">Angewohnheiten hinterfragen</a></li>
<li><a href="#_synchron_war_nie_schlecht">Synchron war nie schlecht</a></li>
<li><a href="#_ausblick_structured_concurrency">Ausblick: Structured Concurrency</a></li>
</ul>
</li>
</ul>
</div>




        </div>
      </div>
      <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
        <!-- Date, Author -->
        <p class="increase-zindex">
          <em>05 May 2023,
          
          <a href="../../blog/profiles/Bertram-Fey.html">Bertram Fey</a></em>
          
        </p>
        <!-- Share buttons above headline -->
        
<div class="increase-zindex">
    <span style="font-size: x-large;">
        <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Ftechstories.dbsystel.de%2Fblog%2F2023%2F2023-05-05-loom-threading.html&text=Threading+wie+es+sein+soll%3A+Projekt+Loom+ist+da" target="_blank"><i class="fab fa-twitter"></i></a>
        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftechstories.dbsystel.de%2Fblog%2F2023%2F2023-05-05-loom-threading.html" target="_blank"><i class="fab fa-linkedin"></i></a>
        <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftechstories.dbsystel.de%2Fblog%2F2023%2F2023-05-05-loom-threading.html" target="_blank"><i class="fab fa-facebook"></i></a>
    </span>
</div>

        <!-- Content -->
        <h1 class='sr-only'>Projekt Loom ist da</h1>
<div class="sect1">
<h2 id="_threading_wie_es_sein_soll_projekt_loom_ist_da">Threading wie es sein soll: Projekt Loom ist da</h2><img src='../../images/topics/dev.png' style='float:left;max-width: 10em; margin-right: 1em;' />
<div class="sectionbody">
<div class="paragraph">
<p>Es ist endlich so weit - das lang ersehnte Projekt Loom hat seinen Weg in das JDK gefunden!</p>
</div>
<!-- teaser -->
<div class="paragraph">
<p>Seit Ã¼ber fÃ¼nf Jahren haben wir uns danach gesehnt, all die KrÃ¼cken wie
<a href="https://www.tutorialspoint.com/java_nio/java_nio_socket_channel.htm">NIO</a>,
<a href="https://www.ideas2it.com/blogs/the-future-interface-the-best-way-for-asynchronous-java-programming/">asynchrone Programmierung</a>,
<code>CompletableFutures</code> und
<code><a href="https://www.hackerearth.com/practice/notes/asynchronous-servlets-in-java/">AsyncServlets</a></code>
hinter uns zu lassen und Java wieder so zu schreiben, wie wir es schon immer wollten.</p>
</div>
<div class="sect2">
<h3 id="_virtualisierung_hilft_schon_immer">Virtualisierung hilft schon immer</h3>
<div class="paragraph">
<p>Auf jedem Rechner gibt es Ressourcen, die begrenzt sind. CPU-Zeit ist seit jeher eine knappe Ressource. Gleichzeitig mÃ¼ssen jedoch hÃ¤ufig viele kleine Aufgaben erledigt werden. Heutzutage verwenden wir meist API-Backends, die Anfragen Ã¼ber HTTP erhalten.</p>
</div>
<div class="paragraph">
<p>Sie lesen Daten, transformieren sie und verÃ¤ndern sie gegebenenfalls. AnschlieÃŸend wird die Antwort per Netzwerk-IO gesendet. Dabei die Ressourcen effizient zu nutzen, war von Anfang an eine Herausforderung und erforderte viel manuelle Arbeit.</p>
</div>
<div class="paragraph">
<p>Zum GlÃ¼ck hatte Edsger W. Dijkstra bereits im Jahr 1965 die brillante Idee, den Zugriff auf wertvolle Ressourcen zu virtualisieren. So bekam das
<a href="https://en.wikipedia.org/wiki/Berkeley_Timesharing_System">Berkeley Timesharing System</a>
die
<a href="http://www.serpentine.com/blog/threads-faq/the-history-of-threads/">ersten Threads</a>
der Computer-Geschichte. Das Konzept war einfach: Threads sind kostengÃ¼nstig und virtualisieren den Zugriff auf wertvolle Ressourcen.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../images/20230505-loom-threading/bs-threads.svg" alt="Threading wie die Urahnen - mit einer CPU">
</div>
<div class="title">Figure 1. Threading wie die Urahnen - mit einer CPU</div>
</div>
<div class="paragraph">
<p>Ein Scheduler sorgt dafÃ¼r, dass blockierte Threads unterbrochen werden und andere Aufgaben ausgefÃ¼hrt werden kÃ¶nnen, bis die notwendigen Ressourcen verfÃ¼gbar sind. Ein wahrhaft revolutionÃ¤res Konzept!</p>
</div>
<div class="paragraph">
<p>Die Welt hat sich seit den ersten Threads des Berkeley Timesharing Systems weiterentwickelt. â€žModerneâ€œ Betriebssysteme wie
<a href="https://de.wikipedia.org/wiki/AmigaOS">AmigaOS</a>
haben das Konzept des Threading verbessert, indem sie es dem Betriebssystem erlauben, rechnende Prozesse zu unterbrechen und an anderer Stelle fortfahren zu lassen. Anders als bei
<a href="https://docs.oracle.com/cd/E19455-01/806-5257/6je9h033n/index.html">User Threads in SunOS</a>,
wo der Code im Thread selbst anzeigt, wann er unterbrochen werden soll.</p>
</div>
</div>
<div class="sect2">
<h3 id="_und_der_weg_ins_schlamassel">â€¦ und der Weg ins Schlamassel</h3>
<div class="paragraph">
<p>Wir haben seitdem viel getan, um das Thread-Konzept kaputt zu bekommen. Wir nutzen gerade Netz-IO in modernen Anwendungen ganz intensiv. IO ist oft das, was diese Anwendungen am meisten machen.</p>
</div>
<div class="paragraph">
<p>Und auf der anderen Seite ist die
<a href="https://www.researchgate.net/figure/CPU-performance-Historical-trends_fig1_321800076">Hardware viel schneller als `65</a>. Wir haben so viele Requests zu verarbeiten und die Rechner sind schnell genug. Das geht. Wir kÃ¶nnen mal eben eine Million Sockets offenhalten und damit arbeiten. Nur: das Threading selbst kommt nur mit
<a href="https://www.tutorialspoint.com/what-is-the-maximum-number-of-threads-per-process-in-linux">ein paar zehntausend Threads</a>
klar.</p>
</div>
<div class="paragraph">
<p>Und deswegen sind inzwischen die Threads selbst die wertvolle Ressource. Und deswegen mussten wir anfangen, die Threads selbst zu teilen, zu poolen und sie wiederzuverwenden.</p>
</div>
<div class="paragraph">
<p>Hierhin fÃ¤llt der Aufstieg der
<a href="https://blog.bitsrc.io/event-based-asynchronous-programming-abb0447381eb?gi=dc11417acbc0">Event-basierten IO-Bibliotheken</a>.
Netty fÃ¤llt in diese Kategorie.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../images/20230505-loom-threading/ioloop.svg" alt="IO-Thread und Worker-Thread bei der Arbeit">
</div>
<div class="title">Figure 2. IO-Thread und Worker-Thread bei der Arbeit</div>
</div>
<div class="paragraph">
<p>IO und Worker Threads: ein speziell fÃ¼r IO-Operationen abgestellter Thread nimmt Daten entgegen. Dieser Thread wickelt sÃ¤mtliche IO-Operationen ab. Damit entfÃ¤llt auch die Notwendigkeit fÃ¼r Locking und Synchronisierung. Sobald Daten eingetroffen sind, werden sie in separaten Worker-Threads verarbeitet. Worker-Threads sollen selbst nie blockieren.</p>
</div>
<div class="paragraph">
<p>Es wird dabei meistens nur ein Thread (manchmal einer pro CPU)
<a href="https://medium.com/@akhaku/netty-data-model-threading-and-gotchas-cab820e4815a">mit IO</a>
beauftragt. Er arbeitet mit
<a href="https://en.wikipedia.org/wiki/Non-blocking_I/O_(Java)">â€žnon-blocking IOâ€œ</a>
, erhÃ¤lt also Events, sobald eine IO-Operation abgeschlossen ist. Dadurch kann ein Thread alle offenen Sockets auf einmal bearbeiten.</p>
</div>
<div class="paragraph">
<p>Sobald das IO abgeschlossen ist, wandert die Arbeit zu einem Worker-Thread weiter, der Berechnungen vornimmt. So lÃ¤sst sich in unserem Beispiel bei drei gleichzeitig aktiven Requests die Thread-Zahl auf zwei reduzieren.</p>
</div>
<div class="paragraph">
<p>Der Preis dafÃ¼r ist, dass die Worker-Threads selbst Bescheid geben mÃ¼ssen, wenn sie fertig sind. Da ist dann das â€žalteâ€œ kooperative Multitasking wieder. In der Praxis spielt das aber weniger eine Rolle, weil wir mehrere Worker-Threads benutzen, als Thread-Pool.</p>
</div>
<div class="paragraph">
<p>Trotzdem â€“ wir bezahlen gleich mehrere Preise dafÃ¼r:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>FÃ¼r jeden Request gibt es mindestens zwei Thread-Wechsel. Und die sind teuer.</p>
</li>
<li>
<p>Sind Teile der Anwendung rechenintensiv, dann mÃ¼ssen wir selbst dafÃ¼r sorgen, dass sie niemanden blockieren. Dann gibt es mehrere Thread-Pools.</p>
</li>
<li>
<p>&#8230;&#8203; und wir brauchen ein kluges Threading-Konzept. Meistens heiÃŸt das, verschiedene Pools fÃ¼r Rechenlast, Netzwerk und File-IO einzufÃ¼hren.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Die IO-APIs sind alles andere als einfach zu bedienen. Und immer etwas anders. Netty fÃ¼r Netzwerk-IO. NIO fÃ¼r File-IO. RDBC fÃ¼r den Datenbankzugriff.</p>
</div>
</div>
<div class="sect2">
<h3 id="_threads_sind_die_grundlage_der_nebenlÃ¤ufigkeit">Threads sind die Grundlage der NebenlÃ¤ufigkeit</h3>
<div class="paragraph">
<p>Die Kernkonzepte von Java basieren auf Threads. Das gilt fÃ¼r den Sprachkern, die VM, fÃ¼rs Debugging und das Profiling.</p>
</div>
<div class="paragraph">
<p>IO-APIs waren synchron und sind in synchroner Form heute noch am Ã¼bersichtlichsten zu benutzen. Das gesamte Exception-System ergibt nur
<a href="https://stackoverflow.com/questions/67631513/short-circuiting-the-chain-of-completionstage">innerhalb eines Threads</a>
wirklich Sinn. Speicherzugriffe innerhalb eines Threads sind geordnet und Ã¼berschaubar.</p>
</div>
<div class="paragraph">
<p>Wir kÃ¶nnten am Ã¼bersichtlichsten alle Arbeit fÃ¼r einen Request in einem eigenen Thread erledigen. Wir kÃ¶nnten einfach einen
<a href="https://dzone.com/articles/spring-webflux-eventloop-vs-thread-per-request-mod">Thread pro Request starten</a>,
synchrone APIs verwenden. Aber es geht nicht, weil einfach zu wenige Threads verfÃ¼gbar sind.</p>
</div>
</div>
<div class="sect2">
<h3 id="_asynchrone_programmierung_als_notlÃ¶sung">Asynchrone Programmierung als NotlÃ¶sung</h3>
<div class="paragraph">
<p>Als Konsequenz opfern wir den Java-Sprachkern und verwenden reaktive Bibliotheken. Und mÃ¼ssen uns fÃ¼r Konstrukte wie Schleifen, If und Try-Catch komplett neue Konstrukte einfallen lassen.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">CompletableFuture
    .supplyAsync(info::getUrl, pool)
    .thenCompose(url -&gt; getBodyAsync(
        pool,
        HttpResponse.BodySubscribers.ofString(UTF_8)))
    .thenApply(info::findImage)
    .thenCompose(url -&gt; getBodyAsync(
        pool,
        HttpResponse.BodySubscribers.ofByteArray()))
    .thenApply(info::setImageData)
    .thenAccept(this::process)
    .exceptionally(t -&gt; { t.printStackTrace(); return null; });</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Ohne auf den konkreten Inhalt dieses Handlers einzugehen, lÃ¤sst sich die Auswirkung auf die Struktur der Programmiersprache erkennen: Das Programm wird nicht mehr in der Ã¼blichen Weise strukturiert, sondern Ã¼ber eine "Fluent API" erstellt und gestartet. Im Kern stellt das eine Monade dar, wie sie zum Beispiel aus Haskell bekannt ist. Dieses neue Sprachkonstrukt hat eine Reihe von Folgen, die interessant zu nutzen sind.</em></p>
</div>
<div class="paragraph">
<p>Mit all den Problemen, die daraus resultieren, dass jetzt JVM, Werkzeuge, Sprache und Tools nicht mehr so recht zusammenpassen wollen: In Stack Traces steht oft
<a href="https://www.baeldung.com/spring-debugging-reactive-streams">kaum noch Hilfreiches</a>.
Mit dem Debugger durch ein reaktives Programm zu steppen ist eine Herausforderung. Und die Ursache fÃ¼r Lastprobleme zu finden, ist problematisch.</p>
</div>
<div class="paragraph">
<p>Diesen Programmierstil verwenden wir definitiv nicht, weil er einfacher zu verstehen wÃ¤re. Oder weil er sonst irgendwie nÃ¼tzlicher zu handhaben wÃ¤re.</p>
</div>
<div class="paragraph">
<p>Wir verwenden diesen Programmierstil, weil wir nicht anders skalieren kÃ¶nnen.</p>
</div>
</div>
<div class="sect2">
<h3 id="_projekt_loom_als_rettung">Projekt Loom als Rettung</h3>
<div class="paragraph">
<p>Die Idee hinter Projekt Loom: Threads mÃ¼ssen wieder so billig werden wie damals. Es darf kein Problem sein, Millionen davon zu starten.</p>
</div>
<div class="paragraph">
<p>Die JVM mappt dazu ihre eigene Art von Threads, die dort VirtualThreads heiÃŸen, auf Betriebssystem-Threads. Das ist ein M:N-Mapping. Also anders als damals zu Solaris-Zeiten, als â€žGreen Threadsâ€œ eben nur auf einen einzigen OS-Thread abgebildet werden konnten. Aber ziemlich so, wie es
<a href="https://www.poeticoding.com/spawning-processes-in-elixir-a-gentle-introduction-to-concurrency/">in Erlang</a>
schon immer war. Und auch die Go-Fans lachten ja bereits Ã¼ber uns Java-Menschen.</p>
</div>
<div class="paragraph">
<p>Die JVM kann das deswegen besser als das Betriebssystem, weil es zum einen mehr Wissen besitzt (zum Beispiel Ã¼ber Stack-GrÃ¶ÃŸen und das Speichermodell) und zum anderen, weil es Threads nicht jederzeit unterbrechen kann. Stattdessen wird nur dort unterbrochen, wo es blockierende Operationen gibt. Das sind hauptsÃ¤chlich IO-Operationen, aber auch dort, wo wir in unseren Programmen manuell synchronisieren.</p>
</div>
<div class="paragraph">
<p>Damit das funktioniert, gab es im Rahmen des Projekts Loom Anpassungen quer durch die JVM und die Basis-Bibliotheken. NIO wurde umgebaut. Das â€žalteâ€œ IO wurde angepasst (und darf und soll damit ruhig wieder benutzt werden). Nur File-IO unter Windows ist noch ein Problem und dauert noch.</p>
</div>
</div>
<div class="sect2">
<h3 id="_virtualthreads_benutzen_ist_fast_einfacher_als_vermeiden">VirtualThreads: benutzen ist (fast) einfacher als vermeiden</h3>
<div class="paragraph">
<p>Seit Java 19 kÃ¶nnen wir Threads sehr einfach als â€žvirtualâ€œ starten:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>var thread = Thread.startVirtualThread(() -&gt; { ... });</pre>
</div>
</div>
<div class="paragraph">
<p>Das ist schon alles. Die JVM kÃ¼mmert sich darum, dass diese VirtualThreads automatisch auf OS-Threads abgebildet werden. Normalerweise auf einen pro CPU-Kern.</p>
</div>
<div class="paragraph">
<p>In diesem VirtualThread lassen sich nach Herzens Lust blockierende Aufrufe, Locks und Sleeps in synchroner Art platzieren. Wir sollen uns keine Gedanken mehr darÃ¼ber machen, wie der Wettstreit um die Ressourcen lÃ¤uft.</p>
</div>
</div>
<div class="sect2">
<h3 id="_anpassungen_im_eigenen_code">Anpassungen im eigenen Code</h3>
<div class="paragraph">
<p>Einige Code-Konstrukte spielen nicht so gut mit VirtualThreads zusammen. Wir kÃ¶nnen sie ersetzen, damit der Code noch besser skaliert.</p>
</div>
<div class="paragraph">
<p>Ganz weit vorne ist (jedenfalls derzeit) noch der â€žsynchronizedâ€œ-Block. Der hÃ¤ngt immer an einem OS-Thread, weil er mit Betriebssystemmitteln implementiert ist. Wir wollen ihn mit â€žReentrantLockâ€œ oder noch besser mit â€žStampedLockâ€œ ersetzen.</p>
</div>
<div class="paragraph">
<p>Der zweite Bereich sind JNI-Aufrufe. Die sind immer dann problematisch, wenn sie innerhalb von â€žsynchronizedâ€œ passieren. Vor allem, wenn wir von nativem Code wieder nach Java callen, zum Beispiel bei Callbacks.</p>
</div>
<div class="paragraph">
<p>Alles das muss uns aber nicht aufhalten. In den meisten FÃ¤llen machen ein paar wenige solche Stellen wenig aus.</p>
</div>
<div class="sect3">
<h4 id="_viele_frameworks_integrieren_virtualthreads_bereits">Viele Frameworks integrieren VirtualThreads bereits</h4>
<div class="paragraph">
<p>In Spring Boot Projekten werden wir bereits dahin gefÃ¼hrt, dass wir Threading an zentraler Stelle implementieren. So wie Spring Boot es intern auch bereits macht.</p>
</div>
<div class="paragraph">
<p>Wir kÃ¶nnen heute schon dafÃ¼r sorgen, dass Spring Boot auf VirtualThreads setzt:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Configuration
class ConfigureVirtualThreads {

    @Bean(TaskExecutionAutoConfiguration.APPLICATION_TASK_EXECUTOR_BEAN_NAME)
    public AsyncTaskExecutor asyncTaskExecutor() {
        return new TaskExecutorAdapter(
                Executors.newVirtualThreadPerTaskExecutor());
    }

    @Bean
    public TomcatProtocolHandlerCustomizer&lt;?&gt; protocolHandlerVirtualThreadExecutorCustomizer() {
        return protocolHandler -&gt; {
            protocolHandler.setExecutor(
                Executors.newVirtualThreadPerTaskExecutor());
        };
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Mit der ersten Deklaration wird Spring konfiguriert. Der neue Task-Executor, den Spring an verschiedenen Stellen fÃ¼r asynchrone Aufrufe nutzt, erhÃ¤lt dafÃ¼r jeweils einen neuen VirtualThread, statt wie vorher einen Thread-Pool.</em></p>
</div>
<div class="paragraph">
<p><em>Die zweite Deklaration konfiguriert den eingebetteten Tomcat, mit dem Spring Boot die Web-Anfragen bearbeitet. Hier ist normalerweise ebenfalls ein Threadpool hinterlegt. Mit der Konfiguration fÃ¤llt dieser Pool weg und es wird jedes Mal ein neuer VirtualThread zur Bearbeitung angelegt.</em></p>
</div>
<div class="paragraph">
<p>Das als Configuration eingefÃ¼gt und schon kommen Servlet-Requests bereits fertig als VirtualThread an.</p>
</div>
<div class="paragraph">
<p>Spring Boot hat VirtualThreads auf dem Schirm, passt immer mal wieder etwas an und ist schon recht weit damit, VirtualThreads sehr effizient zu nutzen.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/micronaut-projects/micronaut-core/pull/8180">Micronaut hat ebenfalls schon Support vorbereitet</a>,
der getestet werden kann.</p>
</div>
<div class="paragraph">
<p>Und fÃ¼r Quarkus gibt es schon
<a href="https://piotrminkowski.com/2022/10/06/quarkus-with-java-virtual-threads/">sehr weitreichenden Support</a>.</p>
</div>
<div class="paragraph">
<p>Und sogar in Wildfly 27 lÃ¤sst sich VirtualThread-Support aktivieren.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_angewohnheiten_hinterfragen">Angewohnheiten hinterfragen</h3>
<div class="paragraph">
<p>Mit Projekt Loom mÃ¼ssen wir fast nie neue Konzepte lernen. Stattdessen kÃ¶nnen wir alte Gewohnheiten ablegen:</p>
</div>
<div class="paragraph">
<p>ThreadPools werden in den meisten FÃ¤llen keinen Mehrwert mehr bieten. Im Gegenteil fÃ¼gen sie Overhead hinzu und
<a href="https://medium.com/javarevisited/is-the-thread-per-request-model-a-good-thing-after-project-loom-6d08012839e8">verlangsamen den eigenen Code</a>.</p>
</div>
<div class="paragraph">
<p>Wo wir bisher Poolen, zum Beispiel um die Anzahl gleichzeitig durchgefÃ¼hrter Requests zu limitieren, kÃ¶nnen wir wieder (wie frÃ¼her) Semaphoren beim Funktionsaufruf nutzen.</p>
</div>
</div>
<div class="sect2">
<h3 id="_synchron_war_nie_schlecht">Synchron war nie schlecht</h3>
<div class="paragraph">
<p>Und dann natÃ¼rlich die Erkenntnis: fÃ¼r 99&#160;% aller Applikationen da drauÃŸen war asynchrone Programmierung nie nÃ¶tig. Auch nicht ohne Projekt Loom. Die wenigsten haben mehr als 30.000 gleichzeitige Requests pro Service-Instanz. Moderne Hardware hat damit kein Problem, auch nicht mit 30k Betriebssystem-Threads. Und weil die Stack-GrÃ¶ÃŸe nur virtuellen Speicher angibt, haben wir auf 64-Bit-Systemen kein Problem damit.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ausblick_structured_concurrency">Ausblick: Structured Concurrency</h3>
<div class="paragraph">
<p>Bis mit Java 21 im Herbst 2023 das nÃ¤chste LTS-Release aufschlÃ¤gt, soll auch Structured Concurrency mit aufgenommen sein.</p>
</div>
<div class="paragraph">
<p>Damit lassen sich dann die Stellen Ã¼bersichtlich angehen, bei denen innerhalb einer Aufgabe Anfragen und Berechnungen parallel erfolgen sollen.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="kotlin">@GetMapping("/trains")
fun listTrainsParallel(): TrainList&lt;TrainRepresentation&gt; {
    val list = StructuredTaskScope.ShutdownOnSuccess&lt;List&lt;Train&gt;&gt;().use { scope -&gt;
        scope.fork { serverA.listActiveSync() }
        scope.fork { serverB.listActiveSync() }
        scope.join().result().map { it.toListRepresentation() }
    }
    val count = StructuredTaskScope.ShutdownOnSuccess&lt;Int&gt;().use { scope -&gt;
        scope.fork { serverA.countActiveSync() }
        scope.fork { serverB.countActiveSync() }
        scope.joinUntil(Instant.now().plusSeconds(15)).result()
    }
    return TrainList(list, count)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Bei den beiden Abfragen kÃ¶nnen wir einfach (Ã¼brigens wieder als Monade) deklarieren, dass die dahinter liegenden Abfragen in separaten Threads erfolgen - im besten Fall in VirtualThreads. "ShutdownOnSuccess" sorgt dafÃ¼r, dass das erste verfÃ¼gbare Ergebnis gewinnt und alle anderen Threads beendet werden. Wir kÃ¶nnen einen Timeout mitgeben, um die Laufzeit - hier auf 15 Sekunden - zu begrenzen.</em></p>
</div>
<div class="paragraph">
<p>Dabei ist wichtig: Es geht bei Structured Concurrency wirklich fast nur um die Lesbarkeit und Wartbarkeit. Schneller oder Ressourcen-sparender wird es dadurch nicht.</p>
</div>
<div class="paragraph">
<p>Also: Es wird spannend im Java-Ã–kosystem. Mit Projekt Loom werden tatsÃ¤chlich die Karten neu gemischt. Endlich kÃ¶nnen wir den Programmierstil wieder so aussuchen, wie er zu unseren Gehirnen passt.</p>
</div>
</div>
</div>
</div>
        <!-- tags -->
        <p>
        <a class='tag' href='../../tags/java.html'>java</a>
        </p>
        <!-- Share buttons below content -->
        
<div class="increase-zindex">
    <span style="font-size: x-large;">
        <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Ftechstories.dbsystel.de%2Fblog%2F2023%2F2023-05-05-loom-threading.html&text=Threading+wie+es+sein+soll%3A+Projekt+Loom+ist+da" target="_blank"><i class="fab fa-twitter"></i></a>
        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftechstories.dbsystel.de%2Fblog%2F2023%2F2023-05-05-loom-threading.html" target="_blank"><i class="fab fa-linkedin"></i></a>
        <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftechstories.dbsystel.de%2Fblog%2F2023%2F2023-05-05-loom-threading.html" target="_blank"><i class="fab fa-facebook"></i></a>
    </span>
</div>

        
        <style>
.feedback--answer {
    display: inline-block;
}

.feedback--answer-no {
    margin-left: 1em;
}

.feedback--response {
    display: none;
    margin-top: 1em;
}

.feedback--response__visible {
    display: block;
}
</style>

<div class="d-print-none">
    <h2 class="feedback--title">Feedback</h2>
    <p class="feedback--question">Was this page helpful?</p>
    <button class="feedback--answer feedback--answer-yes">Yes</button>
    <button class="feedback--answer feedback--answer-no">No</button>
    <p class="feedback--response feedback--response-yes">
        Glad to hear it! Please <a href="https://github.com/dbsystel/tech-stories/issues/new?issue%5Btitle%5D=Docs%3A+Feedback+for+%27Projekt+Loom+ist+da%27%20%F0%9F%91%8D&issue%5Bdescription%5D=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23page:blog/2023/2023-05-05-loom-threading.adoc">tell us
    how we can improve</a>.
    </p>
    <p class="feedback--response feedback--response-no">
        Sorry to hear that. Please <a href="https://github.com/dbsystel/tech-stories/issues/new?issue%5Btitle%5D=Docs%3A+Feedback+for+%27Projekt+Loom+ist+da%27%20%F0%9F%91%8E&issue%5Bdescription%5D=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23page:blog/2023/2023-05-05-loom-threading.adoc">tell
    us how we can improve</a>.
    </p>
</div>
<script>
    const yesButton = document.querySelector('.feedback--answer-yes');
    const noButton = document.querySelector('.feedback--answer-no');
    const yesResponse = document.querySelector('.feedback--response-yes');
    const noResponse = document.querySelector('.feedback--response-no');
    const disableButtons = () => {
        yesButton.disabled = true;
        noButton.disabled = true;
    };
    const sendFeedback = (value) => {
        if (typeof ga !== 'function') return;
        const args = {
            command: 'send',
            hitType: 'event',
            category: 'Helpful',
            action: 'click',
            label: window.location.pathname,
            value: value
        };
        ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
    };
    yesButton.addEventListener('click', () => {
        yesResponse.classList.add('feedback--response__visible');
        disableButtons();
        sendFeedback(1);
    });
    noButton.addEventListener('click', () => {
        noResponse.classList.add('feedback--response__visible');
        disableButtons();
        sendFeedback(0);
    });
</script>

        

      </main>
    </div>
  </div>
  
    <!--footer class="footer mt-auto py-3 bg-light">
        <div class="container">
            <span class="text-muted">&copy; 2020 | based on <a href="https://arc42.org">arc42 7.0</a> | mixed with <a href="http://getbootstrap.com/">Bootstrap v5.0.0-beta</a> | Baked with <a href="http://jbake.org">JBake v2.6.7</a></span>
        </div>
    </footer-->

    <footer class="bg-dark py-2 row d-print-none">
        <div class="container-fluid mx-sm-5">
            <div class="row">
                <div class="col-3 col-sm-2 text-xs-center order-sm-2">


                    <ul class="list-inline mb-0">
                        
                        
                        <li class="list-inline-item mx-2 h3" data-original-title="Contact on Twitter" data-placement="top"
                            data-toggle="tooltip" title="">
                            <a aria-label="Contact on Twitter" title="Contact on Twitter" class="text-white" href="https://twitter.com/dbsystel" rel="noopener noreferrer"
                               target="_blank" style="text-decoration: none;">
                                <i class="fab fa-twitter"></i>
                            </a>
                        </li>
                        
                        
                    </ul>


                </div>
                <div class="col-3 col-sm-2 text-right text-xs-center order-sm-3">


                    <ul class="list-inline mb-0">

                        
                        <li class="list-inline-item mx-2 h3" data-original-title="Checkout on GitHub" data-placement="top"
                            data-toggle="tooltip" title="">
                            <a aria-label="Checkout on GitHub" title="Checkout on GitHub" class="text-white" href="https://github.com/dbsystel" rel="noopener noreferrer"
                               target="_blank" style="text-decoration: none;">
                                <i class="fab fa-github"></i>
                            </a>
                        </li>
                        

                        


                    </ul>


                </div>
                <div class="col-18 col-sm-8 text-center py-2 order-sm-2">

                        [<small class="text-white">built with <a href="https://doctoolchain.org">docToolchain</a> and <a href="https://jbake.org">jBake</a>, <br />
styling supported by <a href="https://db-ui.github.io/">DB UI Core</a>, theme based on <a href="https://www.docsy.dev/">Docsy</a><br />
<a href="https://db-ui.github.io/datenschutzerklaerung.html">DatenschutzerklÃ¤rung / Data Privacy</a> |
<a href="https://www.dbsystel.de/dbsystel-en/legal-3715942">Imprint</a> |
<a href="https://www.dbsystel.de/">DB Systel GmbH</a></small>]

                </div>
            </div>
        </div>
    </footer>

    <script crossorigin="anonymous"
            integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
            src="../../js/popper.min.js"></script>
    <script crossorigin="anonymous"
            integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
            src="../../js/bootstrap.min.js"></script>


    <script crossorigin="anonymous"
            integrity="sha256-tfwbKdJGWDWEQlS9TYBHOOryTAzsUwCbTGiZmJvlWkc=" src="../..//js/main.min.b5fc1b29d2465835844254bd4d804738eaf24c0cec53009b4c6899989be55a47.js"></script>
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/blocks.js" ></script>
    <script src="../../js/prettify.js"></script>
    <script src="../../js/adoc-scrollspy.js"></script>
    <script src="../../js/lightbox.js"></script>
    <script src="../../js/copy-n-paste.js"></script>
    <script src="../../js/openseadragon.js"></script>

    

</body>
</html>
